<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Removedor de Fondo con CSS y JS</title>
    <!-- Carga de Tailwind CSS para un diseño limpio y responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos CSS para el fondo de tablero de ajedrez (simula la transparencia) */
        .checkerboard-bg {
            background-image: 
                linear-gradient(45deg, #ddd 25%, transparent 25%),
                linear-gradient(-45deg, #ddd 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #ddd 75%),
                linear-gradient(-45deg, transparent 75%, #ddd 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
        }

        /* La imagen procesada usa filtros CSS (limitado para remover fondos) */
        .processed-image {
            /* Usamos mix-blend-mode para simular que el fondo blanco se "multiplica" */
            /* Esto hace que el color blanco o muy claro se vuelva transparente sobre el fondo de tablero */
            mix-blend-mode: multiply; 
            filter: drop-shadow(0 0 1px rgba(0,0,0,0.1)); 
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4 sm:p-8 font-sans">

    <div class="max-w-4xl mx-auto bg-white p-6 sm:p-10 rounded-xl shadow-2xl">
        <h1 class="text-3xl sm:text-4xl font-extrabold text-blue-800 mb-4 text-center">
            Removedor de Fondo con JS (Simulación)
        </h1>
        <p class="text-gray-600 mb-8 text-center">
            **Funcionalidad JavaScript:** Permite cargar y mostrar la imagen. **Limitación:** La remoción de fondo se simula con filtros CSS.
        </p>

        <!-- Selector de Archivo -->
        <div class="mb-8 text-center">
            <!-- Etiqueta con estilo de botón para el input de tipo file -->
            <label for="image-upload" class="inline-block px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 cursor-pointer transition duration-300 shadow-md">
                Seleccionar Imagen
            </label>
            <input type="file" id="image-upload" accept="image/*" class="hidden">
        </div>
        
        <!-- Previsualizaciones de Imágenes -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            
            <!-- Imagen Original -->
            <div class="p-4 border border-gray-200 rounded-lg shadow-inner">
                <h2 class="text-xl font-bold mb-3 text-gray-700">Original</h2>
                <div class="bg-gray-200 h-64 flex items-center justify-center rounded-md overflow-hidden">
                    <img id="original-image" src="#" alt="Imagen Original" class="max-h-full max-w-full object-contain transition duration-500" style="display: none;">
                    <p id="original-placeholder" class="text-gray-500">Carga una imagen</p>
                </div>
            </div>
            
            <!-- Imagen Procesada (Simulación) -->
            <div class="p-4 border-4 border-dashed border-red-400 rounded-lg shadow-xl">
                <h2 class="text-xl font-bold mb-3 text-red-600">Fondo "Removido" (CSS)</h2>
                <div class="relative h-64 rounded-md overflow-hidden">
                    <!-- Fondo de tablero para simular transparencia -->
                    <div class="checkerboard-bg absolute inset-0 z-10"></div>
                    
                    <!-- Imagen con el filtro CSS aplicado -->
                    <img id="processed-image" src="#" alt="Imagen Procesada" class="processed-image absolute inset-0 w-full h-full object-contain z-20 transition duration-500" style="display: none;">
                    <p id="processed-placeholder" class="text-gray-500 absolute inset-0 flex items-center justify-center z-30">Se aplicará un filtro...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Bloque JavaScript para la funcionalidad de la aplicación -->
    <script>
        // Variables del DOM
        const fileInput = document.getElementById('image-upload');
        const originalImage = document.getElementById('original-image');
        const processedImage = document.getElementById('processed-image');
        const originalPlaceholder = document.getElementById('original-placeholder');
        const processedPlaceholder = document.getElementById('processed-placeholder');

        /**
         * Maneja la carga de la imagen cuando el usuario selecciona un archivo.
         * Usa FileReader para convertir el archivo a una URL de datos (Base64).
         */
        fileInput.addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                
                // Función que se ejecuta cuando el archivo se ha cargado correctamente
                reader.onload = function(e) {
                    const imageUrl = e.target.result;

                    // 1. Muestra la imagen original
                    originalImage.src = imageUrl;
                    originalImage.style.display = 'block';
                    originalPlaceholder.style.display = 'none';

                    // 2. Muestra la imagen procesada (con el filtro CSS)
                    processedImage.src = imageUrl;
                    processedImage.style.display = 'block';
                    processedPlaceholder.style.display = 'none';
                };
                
                // Inicia la lectura del archivo
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>
</html>
